// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


model Job {

 id                       Int           @id @default(autoincrement())
 job_title                String        @unique
 base_salary              Int
 transportation_allowance Int
 meal_allowance           Int?
 Employees                Employee[]
}

model Attendance {
 id             Int      @id @default(autoincrement())
 month          String
 present        Int?
 sick           Int?
 absent         Int?
 employeeDataId Int?
 EmployeeData   Employee? @relation(fields: [employeeDataId], references: [id])

}

model Employee{
 id             Int     @id @default(autoincrement())
 employee_id    String  @unique
 PAN            String? @unique
 employee_name  String
 username       String  @unique
 password       String
 gender         String
 job_title      String
 join_date      DateTime?
 status         Status
 photo          String?
 url            String?
 access_rights  AccessRights
 jobdataid      Int?
 job            Job?  @relation(fields: [jobdataid],references: [id])
 deductions     Deduction[]
 attendences    Attendance[]

}

enum Status{
  active
  inactive
}

enum AccessRights{
  user
  admin
}

model Deduction {
 id                     Int     @id @default(autoincrement())
 deduction_amount       Int
 salaryAfterDeduction   Int
 employeeDataId         Int 
 EmployeeData           Employee? @relation(fields: [employeeDataId],references: [id])
}
